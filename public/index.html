<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Join | Max Chat</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="css/styles.css" />
    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/libs/jquery.min.js"></script>
</head>
<body class="centered-form">
    <div class="centered-form__form">
        <form action="/chat.html">
            <div class="form-field">
                <h3>Join a Chat</h3>
            </div>
            <div class="form-field">
                <label for="name">Display Name</label>
                <input type="text" name="name" id="name" autofocus>
            </div>
            <div class="form-field">
                <label for="room">Room Name</label>
                <input type="text" name="room" id="room">
            </div>
            <center><p>---OR---</p></center>
            <div class="form-field">
                <label for="room">Choose from active rooms</label>
                <p id="selectRoom" class="form-field">
                <select name="selectRoom" id="chooseRoom">
                   <option value="">----</option>
                </select>
                </p>
            </div>
            <div class="form-field">
                <button type="submit">Join</button>
            </div>
        </form>
    </div> 

    <script>
        var socket = io();
        socket.on('ActiveGroups', function(groups){
            var select = jQuery('#chooseRoom');
            groups.forEach(function(group) {
                var option = jQuery('<option></option>').text(group);
                option.attr('value', group);
                select.append(option)
            });
            jQuery('#selectRoom').html(select);
        });
    </script>
</body>
</html>